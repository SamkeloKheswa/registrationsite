<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hammarsdale Got Talent - Admin</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background: #f4f4f4;
    color: #333;
  }

  /* Login Container */
  #loginContainer, #dashboardContainer {
    max-width: 700px;
    margin: 80px auto;
    padding: 30px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.2);
  }

  h2 {
    text-align: center;
    color: #ff6600;
  }

  label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
  }

  input[type="text"], input[type="password"] {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }

  button {
    background: #ff6600;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 8px;
    font-size: 1em;
    margin-top: 20px;
    cursor: pointer;
    width: 100%;
  }

  button:hover {
    background: #e65c00;
  }

  /* Dashboard Table */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }

  th, td {
    border: 1px solid #ccc;
    padding: 12px;
    text-align: left;
  }

  th {
    background: #ff6600;
    color: white;
  }

  .action-btn {
    padding: 6px 10px;
    margin-right: 5px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    color: white;
  }

  .approve { background: #28a745; }
  .reject { background: #dc3545; }

  .download-btn {
    margin-top: 20px;
    background: #007bff;
  }

  .hidden { display: none; }
</style>
</head>
<body>

<div id="loginContainer">
  <h2>Admin Login</h2>
  <label for="username">Username</label>
  <input type="text" id="username" placeholder="Enter username" required>

  <label for="password">Password</label>
  <input type="password" id="password" placeholder="Enter password" required>

  <button onclick="login()">Login</button>
  <p id="loginError" style="color:red; text-align:center; margin-top:10px;"></p>
</div>

<div id="dashboardContainer" class="hidden">
  <h2>Admin Dashboard</h2>
  <button class="download-btn" onclick="downloadCSV()">Download CSV</button>
  <table id="submissionTable">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Category</th>
        <th>Talent Category</th>
        <th>Other Talent</th>
        <th>Talent Description</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Entries will appear here -->
    </tbody>
  </table>
</div>

<script>
const adminUsername = "admin"; // Change this
const adminPassword = "password123"; // Change this

const loginContainer = document.getElementById('loginContainer');
const dashboardContainer = document.getElementById('dashboardContainer');
const loginError = document.getElementById('loginError');
const submissionTableBody = document.querySelector("#submissionTable tbody");

// Sample data (replace with your Netlify form submissions fetching if needed)
let submissions = [
  {fullname:"John Doe", email:"john@example.com", phone:"0812345678", category:"Performer", talentCategory:"Singing", otherTalent:"", talent:"Sang a song", status:"Pending"},
  {fullname:"Jane Smith", email:"jane@example.com", phone:"0823456789", category:"Volunteer", talentCategory:"", otherTalent:"", talent:"Helping out", status:"Pending"}
];

// Login function
function login(){
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;
  if(username === adminUsername && password === adminPassword){
    loginContainer.classList.add('hidden');
    dashboardContainer.classList.remove('hidden');
    loadTable();
  } else {
    loginError.textContent = "Invalid username or password!";
  }
}

// Load table
function loadTable(){
  submissionTableBody.innerHTML = "";
  submissions.forEach((sub, index)=>{
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${sub.fullname}</td>
      <td>${sub.email}</td>
      <td>${sub.phone}</td>
      <td>${sub.category}</td>
      <td>${sub.talentCategory}</td>
      <td>${sub.otherTalent}</td>
      <td>${sub.talent}</td>
      <td>${sub.status}</td>
      <td>
        <button class="action-btn approve" onclick="updateStatus(${index}, 'Approved')">Approve</button>
        <button class="action-btn reject" onclick="updateStatus(${index}, 'Rejected')">Reject</button>
      </td>
    `;
    submissionTableBody.appendChild(row);
  });
}

// Update status
function updateStatus(index, status){
  submissions[index].status = status;
  loadTable();
}

// Download CSV
function downloadCSV(){
  let csv = "Full Name,Email,Phone,Category,Talent Category,Other Talent,Talent Description,Status\n";
  submissions.forEach(sub=>{
    csv += `${sub.fullname},${sub.email},${sub.phone},${sub.category},${sub.talentCategory},${sub.otherTalent},${sub.talent},${sub.status}\n`;
  });
  const blob = new Blob([csv], { type: 'text/csv' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'submissions.csv';
  link.click();
}
</script>

</body>
</html>
